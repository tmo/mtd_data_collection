
import sys
import nmap
import time
import os

def nmap_scan():
    """
    Last run 40 times each have times py version ___ and os version ___
    6.243462985754013 6.181658375263214

    10
    5.858135199546814 5.66706223487854

    40+10
    6.166397428512573 6.07873914718628

    30
    5.607795111338297 6.092671410242716

    40+10+30
    5.95692155957222 6.083963745832444

    We can call it even.

    Async def slower
    """
    pyversion = [3.1605422496795654, 3.7348127365112305, 7.384467601776123, 3.4410648345947266, 16.8367919921875, 4.526334524154663, 7.329576730728149, 7.350976467132568, 3.4119017124176025, 7.118571758270264, 3.280954599380493, 3.148592233657837, 7.252740859985352, 4.246295928955078, 6.195217609405518, 3.1012203693389893, 3.260422706604004, 14.814425230026245, 7.346505641937256, 7.604144334793091, 3.1637682914733887, 32.832618713378906, 3.8099498748779297, 7.115160703659058, 7.752276659011841, 5.164296865463257, 7.27923059463501, 3.2368717193603516, 6.7336485385894775, 2.79744029045105, 3.383394479751587, 11.400229454040527, 3.452815532684326, 7.120834589004517, 3.115577220916748, 3.1440305709838867, 3.1347503662109375, 4.471869230270386, 2.903815507888794, 3.18038010597229, 3.0996623039245605, 3.3577029705047607, 3.1571550369262695, 5.938520193099976, 3.124849557876587, 7.231876373291016, 3.7853081226348877, 6.2882773876190186, 7.396996974945068, 15.201003074645996, 3.146662473678589, 7.268977880477905, 3.3881375789642334, 6.603322744369507, 3.2864577770233154, 3.4128150939941406, 10.824799537658691, 5.282909870147705, 3.4332029819488525, 7.474395036697388, 3.138537883758545, 3.104843854904175, 3.5729002952575684, 9.509588479995728, 3.101067304611206, 3.3593242168426514, 7.075887441635132, 3.1478452682495117, 3.7572152614593506, 3.227753162384033, 10.466241598129272, 3.850308418273926, 7.287705421447754, 3.097568988800049, 3.344855785369873, 7.2982165813446045, 8.475212335586548, 9.524038553237915, 14.563014030456543, 3.210047483444214]
    osversion = [3.308831214904785, 6.786240339279175, 3.8684537410736084, 3.376575469970703, 3.3362414836883545, 3.46020245552063, 3.216987133026123, 7.123975992202759, 7.217410326004028, 3.9224894046783447, 9.011115312576294, 12.27768611907959, 3.4334957599639893, 7.506175994873047, 6.477834224700928, 7.134643077850342, 3.343435287475586, 6.677737474441528, 3.335681438446045, 3.3661744594573975, 11.279209852218628, 3.2578089237213135, 9.603890180587769, 7.184481620788574, 3.7771036624908447, 7.089972257614136, 3.4121217727661133, 3.062941551208496, 10.909676313400269, 6.835213661193848, 18.02698302268982, 3.14774227142334, 9.102474689483643, 3.1067378520965576, 9.841781854629517, 9.16952133178711, 3.6412506103515625, 3.353855848312378, 6.062021970748901, 7.22015905380249, 4.078672647476196, 14.95589804649353, 10.094220399856567, 3.300346851348877, 3.3327200412750244, 8.098000049591064, 3.3644838333129883, 3.121163845062256, 3.1846041679382324, 3.140512466430664, 7.253690481185913, 7.4413580894470215, 5.884707927703857, 15.667795419692993, 8.758557558059692, 7.274821758270264, 10.015735387802124, 9.491166353225708, 4.034687519073486, 3.444772481918335, 3.1447300910949707, 3.2615766525268555, 3.492344856262207, 3.2334578037261963, 3.453568935394287, 9.931832551956177, 7.092227935791016, 8.011925458908081, 7.337954521179199, 3.392756223678589, 6.081640720367432, 10.901932716369629, 3.1028900146484375, 3.40901255607605, 3.2848479747772217, 3.304441213607788, 7.029649257659912, 3.328038215637207, 3.2954039573669434, 7.422617673873901]
    print(sum(pyversion)/len(pyversion), sum(osversion)/len(osversion))

    hosts = "192.168.20.*"
    args = "-sn"
    nm = nmap.PortScanner()
    pyversion = []
    osversion = []
    for i in range(10):
        start = time.time()
        r = nm.scan(hosts=hosts, arguments=args)
        end = time.time()
        print(nm.all_hosts(), end-start)
        pyversion.append(end-start)

        start = time.time()
        r = os.system("nmap {} {}".format(args, hosts))
        end = time.time()
        print("ran {} {}".format(r, end-start))
        osversion.append(end-start)
        print("---", sum(pyversion)/len(pyversion), sum(osversion)/len(osversion))

    print(pyversion)
    print(osversion)
    print(sum(pyversion)/len(pyversion), sum(osversion)/len(osversion))
